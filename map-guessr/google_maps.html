<script defer src='https://maps.googleapis.com/maps/api/js?key=AIzaSyCMCEQdxYeU8yVPbhu4u58Ugk8BOogv1Bg&v=beta&callback=initMap'></script>
<script>
    const param = {};
    const pairs = location.hash.slice(1).split('&');
    const I = pairs.length;
    for (let i = 0; i < I; ++i) {
        let pair = pairs[i].split('=');
        param[pair[0]] = pair[1];
    }
    const lat = ('lat' in param) ? Number(param['lat']) : 0;
    const lng = ('lng' in param) ? Number(param['lng']) : 0;
    const zoom = Math.log2(156543.03392 * 500 *  Math.cos(lat * Math.PI / 180)/(6378137.0*2*Math.PI/360));
    

    function initMap() {
        document.getElementById('zoom').innerHTML='zoom: ${zoom}, lat: ${lat}, lng: ${lng}';
        const map = new google.maps.Map(
            document.getElementById('map_canvas')
            , {
            center: { lat: lat, lng: lng},
            zoom: zoom,
            mapTypeId: 'satellite',
            isFractionalZoomEnabled: true,
            // mapTypeControl: false,
            // panControl: false,
            // zoomControl: false,
            // streetViewControl: false,
            gestureHandling: 'none',
            disableDefaultUI: true,
            disableDoubleClickZoom: true,
            keyboardShortcuts: false,
            scrollwheel: false,
        }
        );
    }
</script>
<div id='map_canvas' style='height: 500px;width: 500px;'></div>
<div id='zoom'></div>
